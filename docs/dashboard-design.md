# TFDrift-Falco Dashboard Design

## ç¾åœ¨ã®çŠ¶æ…‹

### å‡ºåŠ›æ–¹å¼
ç¾åœ¨ã€TFDrift-Falcoã¯ä»¥ä¸‹ã®å½¢å¼ã§å‡ºåŠ›ã—ã¦ã„ã¾ã™:

1. **Consoleå‡ºåŠ›** (ANSIè‰²ä»˜ã)
   - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã®è¦–è¦šçš„ãªè¡¨ç¤º
   - Severityåˆ¥ã®è‰²åˆ†ã‘ (CRITICAL=èµ¤, HIGH=é»„, etc)

2. **Slack/Discordé€šçŸ¥**
   - Markdownå½¢å¼
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆ

3. **JSONå‡ºåŠ›**
   - SIEMçµ±åˆç”¨
   - ãƒ­ã‚°åé›†ã‚·ã‚¹ãƒ†ãƒ é€£æº

### åˆ¶é™äº‹é …
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆã¯æ©Ÿèƒ½
- âŒ å±¥æ­´ã®å¯è¦–åŒ–ãªã—
- âŒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãªã—
- âŒ ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æãªã—
- âŒ ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°/æ¤œç´¢æ©Ÿèƒ½ãªã—

## ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹æƒ³

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚ªãƒ—ã‚·ãƒ§ãƒ³

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³A: çµ„ã¿è¾¼ã¿Webãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
```
TFDrift-Falco
  â”œâ”€â”€ Detector (æ—¢å­˜)
  â””â”€â”€ Web Server (æ–°è¦)
       â”œâ”€â”€ REST API
       â”œâ”€â”€ WebSocket (ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°)
       â””â”€â”€ Static Files (React/Vue frontend)
```

**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯:**
- Backend: Goæ¨™æº– `net/http` ã¾ãŸã¯ Gin/Echo
- Frontend: React/Vue.js
- Storage: SQLite (è»½é‡) ã¾ãŸã¯ PostgreSQL
- Realtime: WebSocket

**ãƒ¡ãƒªãƒƒãƒˆ:**
- ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ãƒ‡ãƒ—ãƒ­ã‚¤
- è¿½åŠ ã‚¤ãƒ³ãƒ•ãƒ©ä¸è¦
- ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆ

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**
- TFDrift-Falcoã«å¤šãã®æ©Ÿèƒ½è¿½åŠ 
- å˜ä¸€éšœå®³ç‚¹

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³B: å¤–éƒ¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çµ±åˆ
```
TFDrift-Falco â†’ Metrics Export â†’ Grafana/Kibana
                  â†“
                Prometheus/Elasticsearch
```

**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯:**
- Metrics: Prometheus exporter
- Logs: Elasticsearch/Loki
- Dashboard: Grafana/Kibana

**ãƒ¡ãƒªãƒƒãƒˆ:**
- æ—¢å­˜ã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ æ´»ç”¨
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«
- å¤šæ©Ÿèƒ½

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**
- è¤‡é›‘ãªæ§‹æˆ
- è¿½åŠ ã‚¤ãƒ³ãƒ•ãƒ©ãŒå¿…è¦

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³C: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ (æ¨å¥¨)
```
TFDrift-Falco
  â”œâ”€â”€ Detector
  â”œâ”€â”€ Simple Web UI (å†…è”µ)
  â””â”€â”€ Metrics/Logs Export
       â”œâ”€â”€ Prometheus metrics
       â”œâ”€â”€ JSON logs
       â””â”€â”€ Grafana integration
```

**ä¸¡æ–¹ã®ã„ã„ã¨ã“å–ã‚Š:**
- ç°¡æ˜“çš„ãªå†…è”µãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆè¨­å®šç¢ºèªã€æœ€æ–°ã‚¢ãƒ©ãƒ¼ãƒˆï¼‰
- è©³ç´°åˆ†æã¯ Grafana/Kibana

## UIãƒ‡ã‚¶ã‚¤ãƒ³ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

### ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ›°ï¸ TFDrift-Falco Dashboard                    [Settings] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ğŸ“Š Statistics (Last 24h)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  CRITICAL  â”‚    HIGH    â”‚   MEDIUM   â”‚    LOW     â”‚      â”‚
â”‚  â”‚     12     â”‚     45     â”‚     23     â”‚     8      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                               â”‚
â”‚  ğŸ”´ Recent Alerts                                [Filter â–¼]  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸš¨ CRITICAL â”‚ 2 min ago                              â”‚  â”‚
â”‚  â”‚ IAM Role Trust Policy Modified                        â”‚  â”‚
â”‚  â”‚ aws_iam_role.lambda_execution_role                    â”‚  â”‚
â”‚  â”‚ User: john.doe@company.com                            â”‚  â”‚
â”‚  â”‚                                      [Details] [Ack]  â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ âš ï¸  HIGH    â”‚ 15 min ago                             â”‚  â”‚
â”‚  â”‚ EC2 Instance Type Changed                             â”‚  â”‚
â”‚  â”‚ aws_instance.web_server                               â”‚  â”‚
â”‚  â”‚ t2.micro â†’ t3.large                                   â”‚  â”‚
â”‚  â”‚                                      [Details] [Ack]  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  ğŸ“ˆ Drift Trends                                             â”‚
â”‚  [7d] [30d] [90d]                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        â–ˆâ–ˆ                                              â”‚  â”‚
â”‚  â”‚     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                            â”‚  â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   Mon  Tue  Wed  Thu  Fri  Sat  Sun                         â”‚
â”‚                                                               â”‚
â”‚  ğŸ¯ Top Drifted Resources                                    â”‚
â”‚  1. aws_iam_role.*              45 changes                   â”‚
â”‚  2. aws_instance.*              23 changes                   â”‚
â”‚  3. aws_s3_bucket.*             18 changes                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚¢ãƒ©ãƒ¼ãƒˆè©³ç´°ãƒšãƒ¼ã‚¸
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Back to Dashboard                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ğŸš¨ DRIFT ALERT DETAILS                                      â”‚
â”‚                                                               â”‚
â”‚  Severity: CRITICAL                                          â”‚
â”‚  Timestamp: 2025-01-15 14:23:45 JST                          â”‚
â”‚  Status: [Open â–¼] [Mark as Resolved] [Create Ticket]        â”‚
â”‚                                                               â”‚
â”‚  ğŸ“¦ Resource                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Type:     aws_iam_role                                 â”‚  â”‚
â”‚  â”‚ Name:     lambda_execution_role                        â”‚  â”‚
â”‚  â”‚ ID:       arn:aws:iam::123456789:role/lambda-exec      â”‚  â”‚
â”‚  â”‚ Region:   us-east-1                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  ğŸ‘¤ User Identity                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ User:        john.doe@company.com                      â”‚  â”‚
â”‚  â”‚ Principal:   arn:aws:iam::123456789:user/john.doe      â”‚  â”‚
â”‚  â”‚ IP Address:  203.0.113.45                              â”‚  â”‚
â”‚  â”‚ User Agent:  AWS Console                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  ğŸ”„ Changes                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Attribute: assume_role_policy                          â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚ Before (Terraform State):                              â”‚  â”‚
â”‚  â”‚ {                                                       â”‚  â”‚
â”‚  â”‚   "Version": "2012-10-17",                             â”‚  â”‚
â”‚  â”‚   "Statement": [{                                       â”‚  â”‚
â”‚  â”‚     "Effect": "Allow",                                  â”‚  â”‚
â”‚  â”‚     "Principal": {                                      â”‚  â”‚
â”‚  â”‚ -     "Service": "lambda.amazonaws.com"                 â”‚  â”‚
â”‚  â”‚     },                                                  â”‚  â”‚
â”‚  â”‚     "Action": "sts:AssumeRole"                          â”‚  â”‚
â”‚  â”‚   }]                                                    â”‚  â”‚
â”‚  â”‚ }                                                       â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚ After (Current State):                                 â”‚  â”‚
â”‚  â”‚ {                                                       â”‚  â”‚
â”‚  â”‚   "Version": "2012-10-17",                             â”‚  â”‚
â”‚  â”‚   "Statement": [{                                       â”‚  â”‚
â”‚  â”‚     "Effect": "Allow",                                  â”‚  â”‚
â”‚  â”‚     "Principal": {                                      â”‚  â”‚
â”‚  â”‚ +     "Service": [                                      â”‚  â”‚
â”‚  â”‚ +       "lambda.amazonaws.com",                         â”‚  â”‚
â”‚  â”‚ +       "ec2.amazonaws.com"                             â”‚  â”‚
â”‚  â”‚ +     ]                                                 â”‚  â”‚
â”‚  â”‚     },                                                  â”‚  â”‚
â”‚  â”‚     "Action": "sts:AssumeRole"                          â”‚  â”‚
â”‚  â”‚   }]                                                    â”‚  â”‚
â”‚  â”‚ }                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  ğŸ“‹ Matched Falco Rules                                      â”‚
â”‚  â€¢ IAM Role Trust Policy Modified                            â”‚
â”‚                                                               â”‚
â”‚  ğŸ’¬ Comments                                                  â”‚
â”‚  [Add comment...]                                            â”‚
â”‚                                                               â”‚
â”‚  ğŸ“Š Actions                                                   â”‚
â”‚  [Revert via Terraform] [Ignore] [Create JIRA Ticket]       â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ›°ï¸ TFDrift     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š Dashboard   â”‚
â”‚ ğŸ”´ Alerts      â”‚
â”‚ ğŸ“ˆ Analytics   â”‚
â”‚ ğŸ¯ Resources   â”‚
â”‚ ğŸ¦… Falco Rules â”‚
â”‚ âš™ï¸  Settings   â”‚
â”‚ ğŸ“– Docs        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ©Ÿèƒ½è¦ä»¶

### Phase 1: MVP (Minimum Viable Product)
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆãƒªã‚¹ãƒˆ
- [ ] ã‚¢ãƒ©ãƒ¼ãƒˆè©³ç´°è¡¨ç¤º
- [ ] Severityåˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- [ ] æœ€è¿‘24æ™‚é–“ã®çµ±è¨ˆ
- [ ] WebSocket ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°

### Phase 2: åˆ†ææ©Ÿèƒ½
- [ ] æ™‚ç³»åˆ—ã‚°ãƒ©ãƒ• (7æ—¥/30æ—¥/90æ—¥)
- [ ] ãƒªã‚½ãƒ¼ã‚¹åˆ¥ãƒ‰ãƒªãƒ•ãƒˆé›†è¨ˆ
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£
- [ ] ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ (CSV/JSON)

### Phase 3: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½
- [ ] ã‚¢ãƒ©ãƒ¼ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç† (Open/Acknowledged/Resolved)
- [ ] ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½
- [ ] Terraform ãƒªãƒãƒ¼ãƒˆææ¡ˆ
- [ ] JIRA/GitHub Issues é€£æº

### Phase 4: é«˜åº¦ãªæ©Ÿèƒ½
- [ ] ãƒ‰ãƒªãƒ•ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º (ML)
- [ ] ç•°å¸¸æ¤œçŸ¥
- [ ] ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆ
- [ ] å¤‰æ›´æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

## æŠ€è¡“å®Ÿè£…æ¡ˆ

### Backend APIè¨­è¨ˆ

```go
// pkg/dashboard/server.go
package dashboard

type Server struct {
    detector *detector.Detector
    storage  Storage
    hub      *websocket.Hub
}

// API Endpoints
GET  /api/alerts              // ã‚¢ãƒ©ãƒ¼ãƒˆä¸€è¦§
GET  /api/alerts/:id          // ã‚¢ãƒ©ãƒ¼ãƒˆè©³ç´°
POST /api/alerts/:id/ack      // ã‚¢ãƒ©ãƒ¼ãƒˆæ‰¿èª
GET  /api/stats               // çµ±è¨ˆæƒ…å ±
GET  /api/resources           // ãƒªã‚½ãƒ¼ã‚¹ä¸€è¦§
GET  /ws                      // WebSocketæ¥ç¶š
```

### ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸

```go
// pkg/storage/sqlite.go
type Alert struct {
    ID           string    `json:"id"`
    Timestamp    time.Time `json:"timestamp"`
    Severity     string    `json:"severity"`
    ResourceType string    `json:"resource_type"`
    ResourceName string    `json:"resource_name"`
    ResourceID   string    `json:"resource_id"`
    Attribute    string    `json:"attribute"`
    OldValue     string    `json:"old_value"`
    NewValue     string    `json:"new_value"`
    UserIdentity string    `json:"user_identity"`
    Status       string    `json:"status"` // open, acked, resolved
    Comments     []Comment `json:"comments"`
}
```

### WebSocket ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°

```javascript
// frontend/src/websocket.js
const ws = new WebSocket('ws://localhost:8080/ws');

ws.onmessage = (event) => {
  const alert = JSON.parse(event.data);
  // Update UI with new alert
  addAlertToList(alert);
  showNotification(alert);
};
```

## UI/UXãƒ‡ã‚¶ã‚¤ãƒ³å‚è€ƒ

### ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ 
```
CRITICAL: #FF4444 (èµ¤)
HIGH:     #FFA500 (ã‚ªãƒ¬ãƒ³ã‚¸)
MEDIUM:   #FFD700 (é»„)
LOW:      #90EE90 (ç·‘)

Background: #1E1E1E (ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒ)
Text:       #E0E0E0
Accent:     #4A90E2 (é’)
```

### ãƒ•ã‚©ãƒ³ãƒˆ
- Primary: Inter, SF Pro, Segoe UI
- Monospace: Fira Code, JetBrains Mono (ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ç”¨)

### ã‚¢ã‚¤ã‚³ãƒ³
- Material Design Icons ã¾ãŸã¯ Lucide Icons

## Grafanaçµ±åˆã‚µãƒ³ãƒ—ãƒ«

```yaml
# grafana-dashboard.json
{
  "dashboard": {
    "title": "TFDrift-Falco Monitoring",
    "panels": [
      {
        "title": "Drift Events by Severity",
        "type": "piechart",
        "targets": [
          {
            "expr": "sum by(severity) (tfdrift_alerts_total)"
          }
        ]
      },
      {
        "title": "Drifts Over Time",
        "type": "graph",
        "targets": [
          {
            "expr": "rate(tfdrift_alerts_total[5m])"
          }
        ]
      },
      {
        "title": "Top Drifted Resources",
        "type": "table",
        "targets": [
          {
            "expr": "topk(10, sum by(resource_type) (tfdrift_alerts_total))"
          }
        ]
      }
    ]
  }
}
```

## å®Ÿè£…å„ªå…ˆé †ä½

### çŸ­æœŸ (1-2é€±é–“)
1. âœ… åŸºæœ¬çš„ãªãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ (Prometheus)
2. âœ… JSON logs output (æ—¢å­˜æ©Ÿèƒ½ã®æ‹¡å¼µ)
3. â¬œ ç°¡æ˜“çš„ãªWebãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ (èª­ã¿å–ã‚Šå°‚ç”¨)

### ä¸­æœŸ (1-2ãƒ¶æœˆ)
1. â¬œ SQLiteæ°¸ç¶šåŒ–
2. â¬œ WebSocketãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
3. â¬œ ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°/æ¤œç´¢æ©Ÿèƒ½

### é•·æœŸ (3-6ãƒ¶æœˆ)
1. â¬œ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†æ©Ÿèƒ½
2. â¬œ å¤–éƒ¨é€£æº (JIRA, Slackè©³ç´°)
3. â¬œ MLãƒ™ãƒ¼ã‚¹ã®ç•°å¸¸æ¤œçŸ¥

## ãƒ‡ãƒ¢ç”¨ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿

é–‹ç™ºæ™‚ã«ä½¿ç”¨ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ©ãƒ¼ãƒˆ:

```json
[
  {
    "id": "alert-001",
    "timestamp": "2025-01-15T14:23:45Z",
    "severity": "critical",
    "resource_type": "aws_iam_role",
    "resource_name": "lambda_execution_role",
    "attribute": "assume_role_policy",
    "user_identity": "john.doe@company.com",
    "status": "open"
  },
  {
    "id": "alert-002",
    "timestamp": "2025-01-15T14:08:12Z",
    "severity": "high",
    "resource_type": "aws_instance",
    "resource_name": "web_server",
    "attribute": "instance_type",
    "old_value": "t2.micro",
    "new_value": "t3.large",
    "user_identity": "admin@company.com",
    "status": "acknowledged"
  }
]
```

## å‚è€ƒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

- **Falco UI**: https://github.com/falcosecurity/falcosidekick-ui
- **Prometheus Alertmanager**: ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†UI
- **Grafana**: é«˜æ©Ÿèƒ½ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- **Sentry**: ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã®UXå‚è€ƒ
- **Datadog**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ©ãƒ¼ãƒˆã®UIå‚è€ƒ

## ã¾ã¨ã‚

ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¯ **Phase 1 (MVP)** ã‹ã‚‰æ®µéšçš„ã«å®Ÿè£…ã™ã‚‹ã®ãŒç¾å®Ÿçš„ã§ã™ã€‚

**æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ:**
1. ã¾ãš Prometheus metrics export è¿½åŠ  â†’ Grafanaé€£æº
2. æ¬¡ã«ç°¡æ˜“çš„ãªå†…è”µWebãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ (èª­ã¿å–ã‚Šå°‚ç”¨)
3. æœ€å¾Œã«ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½è¿½åŠ 

ã“ã‚Œã«ã‚ˆã‚Šã€æ©Ÿèƒ½ã‚’æ®µéšçš„ã«è¿½åŠ ã—ãªãŒã‚‰ã€æ—©æœŸã«ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ä¾¡å€¤ã‚’æä¾›ã§ãã¾ã™ã€‚
